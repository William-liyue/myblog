<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博文发布</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/../../lib/layui-v2.6.8/layui/css/layui.css">
    <link rel="stylesheet" href="/../../lib/editor.md/css/editormd.css">
    <link rel="stylesheet" href="/../../css/style.css">
</head>

<!--中间内容-->
<div class="container">
    <div class="row">
        <div class="layui-layout layui-layout-admin">
            <div class="layui-header layui-bg-green">
                <div class="layui-logo layui-hide-xs layui-bg-black">后台管理</div>
                <!--导航栏-->
                <ul class="layui-nav layui-layout-left">
                    <!--移动端显示-->
                    <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-hander-event="menuLeft">
                        <i class="layui-icon layui-icon-spread-left"></i>
                    </li>
                    <li class="layui-nav-item layui-hide-xs"><a href="#" th:href="@{/admin/Admin}">首页</a></li>
                    <li class="layui-nav-item">
                        <a href="#" th:href="@{/admin/blogs}">文章管理</a>
                        <dl class="layui-nav-child">
                            <dd><a href="#" th:href="@{/admin/blogs}">列表</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item layui-hide-xs"><a href="#" th:href="@{/admin/types}">分类管理</a></li>
                    <li class="layui-nav-item layui-hide-xs"><a href="#" th:href="@{/admin/friendlinks}">友链</a></li>
                    <li class="layui-nav-item layui-hide-xs"><a href="#" th:href="@{/admin/resources}">资源管理</a></li>
                    <li class="layui-nav-item">
                        <a href="javascript:;">nav groups</a>
                        <dl class="layui-nav-child">
                            <dd><a href="">menu 11</a></dd>
                            <dd><a href="">menu 22</a></dd>
                            <dd><a href="">menu 33</a></dd>
                        </dl>
                    </li>
                </ul>
                <ul class="layui-nav layui-layout-right">
                    <li class="layui-nav-item layui-hide layui-show-md-inline-block">
                        <a href="javascript:;">
                            <img src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg" class="layui-nav-img">
                            tester
                        </a>
                        <dl class="layui-nav-child">
                            <dd><a href="">Your Profile</a></dd>
                            <dd><a href=""><i class="layui-icon">&#xe716;</i>设置</a></dd>
                            <dd><a href="">退出登录</a></dd>
                        </dl>
                    </li>
                    <li class="layui-nav-item" lay-header-event="menuRight" lay-unselect>
                        <a href="javascript:;">
                            <i class="layui-icon layui-icon-more-vertical"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="layui-side layui-bg-black">
                <div class="layui-side-scroll">
                    <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
                    <ul class="layui-nav layui-nav-tree layui-menu-item-down" lay-filter="test">
                        <li class="layui-nav-item layui-nav-itemed">
                            <a class="" href="javascript:;">menu group 1</a>
                            <dl class="layui-nav-child">
                                <dd><a href="javascript:;">menu 1</a></dd>
                                <dd><a href="javascript:;">menu 2</a></dd>
                                <dd><a href="javascript:;">menu 3</a></dd>
                                <dd><a href="">the links</a></dd>
                            </dl>
                        </li>
                        <li class="layui-nav-item">
                            <a href="javascript:;">menu group 2</a>
                            <dl class="layui-nav-child">
                                <dd><a href="javascript:;">list 1</a></dd>
                                <dd><a href="javascript:;">list 2</a></dd>
                                <dd><a href="">超链接</a></dd>
                            </dl>
                        </li>
                        <li class="layui-nav-item"><a href="javascript:;">click menu item</a></li>
                        <li class="layui-nav-item"><a href="">the links</a></li>
                    </ul>
                </div>
            </div>
            <div class="layui-body">
                <!-- 内容主体区域 -->
                <form id="blog-form" th:object="${blog}" action="#" th:action="*{id}==null ? @{/admin/blogs} : @{/admin/blogs/{id}(id=*{id})}" method="post">
                    <input type="hidden" name="published" th:value="*{published}">
                    <input type="hidden" name="id" th:value="*{id}">
                    <div action="#" th:action="@{/blog}">
                        <div class="input-group">
                            <select class="layui-btn layui-icon layui-font-12 dropdown" name="title" id="title" th:value="*{title}" >
                                <option value="原创">原创</option>
                                <option value="转载">转载</option>
                                <option value="翻译">翻译</option>
                            </select>
                            <input class="form-control" type="text" name="title" placeholder="标题" th:value="*{title}">
                        </div>
                    </div>
                    <div class="layui-input-block" id="md-content" style="z-index: 1 !important;">
                        <textarea placeholder="博客内容" name="content" style="display: none" th:text="*{content}"></textarea>
                    </div>
                    <div class="layui-layout-body">
                        <div class="layui-form-item">
                            <label class="layui-form-label">分类</label>
                            <div class="layui-input-inline">
                                <input type="text" class="form-control layui-input" name="typeId" th:value="*{typeId}" id="typeId" placeholder="分类">
                            </div>
                            <label class="layui-form-label">首图</label>
                            <div class="layui-input-inline">
                                <input type="text" class="form-control layui-input" name="firstPicture" th:value="*{firstPicture}" id="firstPicture" placeholder="图片引用地址">
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md12">
                        <div class="layui-form-item">
                            <textarea class="layui-textarea" name="description" th:value="*{description}" placeholder="博客描述..." maxlength="500" rows="10" cols="30"></textarea>
                        </div>
                    </div>
                    <div class="layui-col-md12">
                        <div class="layui-col-md3">
                            <div class="form-check">
                                <label class="form-check-label" for="recommend">
                                    推荐
                                </label>
                                <input class="form-check-input hidden" type="checkbox" id="recommend" name="recommend" checked th:checked="*{recommend}">
                            </div>
                        </div>
                        <div class="layui-col-md3">
                            <div class="form-check">
                                <label class="form-check-label" for="shareStatement">
                                    转载声明
                                </label>
                                <input class="form-check-input hidden" type="checkbox" id="shareStatement" name="shareStatement" th:checked="*{shareStatement}">
                            </div>
                        </div>
                        <div class="layui-col-md3">
                            <div class="form-check">
                                <label class="form-check-label" for="appreciation">
                                    赞赏
                                </label>
                                <input class="form-check-input hidden" type="checkbox" id="appreciation" name="appreciation" th:checked="*{appreciation}">
                            </div>
                        </div>
                        <div class="layui-col-md3">
                            <div class="form-check">
                                <input class="form-check-input hidden" type="checkbox" id="commentabled" name="commentabled" th:checked="*{commentabled}">
                                <label class="form-check-label" for="commentabled">
                                    评论
                                </label>
                            </div>
                        </div>
                        <div class="error message"></div>
                        <div class="layui-body">
                            <div class="layui-form-item">
                                <button type="button" class="btn layui-btn layui-btn-checked me-md-1" onclick="window.history.go(-1)">返回</button>
                                <button type="button" id="save-btn" class="btn layui-btn layui-btn-normal me-md-1">保存</button>
                                <button type="button" id="publish-btn" class="btn layui-btn me-md-1">发布</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
<!--            <div class="layui-footer">-->
<!--                &lt;!&ndash; 底部固定区域 &ndash;&gt;-->
<!--                <p class="text-center">Copyright©2020-2021-->
<!--                    <a href="" target="_blank" rel="nofollow" style="color: #B4BF42">湘ICP</a>-->
<!--                    <a href="" target="_blank" rel="nofollow" style="color: #B4BF42"><img src="" alt="">湘公网</a>-->
<!--                </p>-->
<!--            </div>-->
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
<!--[if lt IE 9]>
<script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
<script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<script src="/../../lib/layui-v2.6.8/layui/layui.js"></script>
<script src="/../../lib/editor.md/editormd.min.js" ></script>
<script>
    layui.use(['element', 'dropdown', 'util', 'layer', 'table'], function(){
        var dropdown = layui.dropdown
            ,util = layui.util
            ,layer = layui.layer
            ,table = layui.table
            ,$ = layui.jquery;

        //头部事件
        util.event('lay-header-event', {
            //左侧菜单事件
            menuLeft: function(othis){
                layer.msg('展开左侧菜单的操作', {icon: 0});
            }
            ,menuRight: function(){
                layer.open({
                    type: 1
                    ,content: '<div style="padding: 15px;">处理右侧面板的操作</div>'
                    ,area: ['260px', '100%']
                    ,offset: 'rt' //右上角
                    ,anim: 5
                    ,shadeClose: true
                });
            }
        });
        // 触发事件
        dropdown.render({
            elem: '#typeId'
            ,data: [{
                title: 'menu item 1'
                ,id: 101
            },{
                title: 'menu item 2'
                ,id: 102
            },{
                title: 'menu item 3'
                ,id: 103
            },{
                title: 'menu item 4'
                ,id: 104
            },{
                title: 'menu item 5'
                ,id: 105
            },{
                title: 'menu item 6'
                ,id: 106
            }]
            ,click: function(obj){
                this.elem.val(obj.title);
            }
            ,style: 'width: 235px;'
        });
    });
</script>
<script type="text/javascript">
    $('#blog-message').load(/*[[@{/footer/blogmessage}]]*/"/footer/blogmessage");

    var dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'))
    var dropdownList = dropdownElementList.map(function (dropdownToggleEl) {
        return new bootstrap.Dropdown(dropdownToggleEl)
    })

    $('#save-btn').click(function () {
        $('[name="published"]').val(false);
        $('#blog-form').submit();
    });

    $('#publish-btn').click(function () {
        $('[name="published"]').val(true);
        $('#blog-form').submit();
    });
    //初始化Markdown编辑器
    $(function() {
        var editor = editormd("md-content", {
            width  : "100%",
            height : 600,
            syncScrolling: "single",
            path   : "/lib/editor.md/lib/"
        });
        /*
        or
        var editor = editormd({
            id: "editormd",
            path: "/lib/editor.md/lib"
        })*/
    });
</script>
</body>
</html>